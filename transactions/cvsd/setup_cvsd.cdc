
import FungibleToken from "../../contracts/standard/FungibleToken.cdc"

import CVSDTokenV2 from "../../contracts/CVSD/CVSDTokenV2.cdc"


transaction {

    prepare(signer: AuthAccount) {

        // It's OK if the account already has a Vault, but we don't want to replace it
        if(signer.borrow<&CVSDTokenV2.Vault>(from: /storage/cvsdTokenVault) == nil) {
            signer.save(<-CVSDTokenV2.createEmptyVault(), to: /storage/cvsdTokenVault)
        }
        
        // Create a new FUSD Vault and put it in storage

        // Create a public capability to the Vault that only exposes
        // the deposit function through the Receiver interface
        signer.link<&CVSDTokenV2.Vault{FungibleToken.Receiver}>(
            /public/cvsdReceiver,
            target: /storage/cvsdTokenVault
        )

        signer.link<&{FungibleToken.Balance}>(/public/cvsdBalance, target: /storage/cvsdTokenVault)
        let code = "7b0a09226e6574776f726b73223a207b0a090922656d756c61746f72223a20223132372e302e302e313a33353639222c0a0909226d61696e6e6574223a20226163636573732e6d61696e6e65742e6e6f6465732e6f6e666c6f772e6f72673a39303030222c0a09092273616e64626f786e6574223a20226163636573732e73616e64626f786e65742e6e6f6465732e6f6e666c6f772e6f72673a39303030222c0a090922746573746e6574223a20226163636573732e6465766e65742e6e6f6465732e6f6e666c6f772e6f72673a39303030220a097d2c0a09226163636f756e7473223a207b0a090922656d756c61746f722d6163636f756e74223a207b0a0909092261646472657373223a202266386436653035383662306132306337222c0a090909226b6579223a202239613266336234613839623561623431633031336138306465343762633862306462316561643034336363656533383431396264376265386330313430666330220a09097d2c0a0909226465706c6f792d6163636f756e74223a207b0a0909092261646472657373223a2022307865303364616562656438636130363135222c0a090909226b6579223a202262336133303139616432663662623064363534656664363034623137343630336339633434623334633933373631633635323063623665343462383134626266222c0a090909227075626c6963223a20223836376564353863303732613139343837313433323336343437316563613261623664616661303334323562313231373631306561343535626231636261636266343737373737636431323234366331323836623066643966653138323834333330313161343939363066653934393438353734653938386161643762313766220a09097d2c0a090922666c6f77546f6b656e2d70726963652d6f7261636c65223a207b0a0909092261646472657373223a2022307830343561313736336339333030366361222c0a090909226b6579223a202232613637663761643034336134326238653538333939613435636163333734643733393537633435643436316231623737363733356433343536393539663566222c0a090909227075626c6963223a20223433663865366637366238653738613733636232653639363666393035666435623339653266646435353030343433376631613833396235653031346561346430326432633964613832333362393834643730396339383130366362326137643863643331646235633031653966653163303734356433353230616330346130220a09097d2c0a090922667573642d70726963652d6f7261636c65223a207b0a0909092261646472657373223a2022307831323065373235303530333430636162222c0a090909226b6579223a202237353962643931303632333961623436646664663035313437326639333963643633393337646162366632643636653439623431393531323864663635376461222c0a090909227075626c6963223a20226364323964343764663866363436383565656637343432616139323834373666303166393361636438323738336134353938633135313732383666313736396635313834623731323365646438643431616334396132356636346639363435323565366236346566643366393834366134363731326235303339393737376430220a09097d2c0a090922746573746e65742d637673642d6465706c6f792d6163636f756e74223a207b0a0909092261646472657373223a2022307865386464393461356562313231373565222c0a090909226b6579223a202235393065646536316364306463666432346439623935373034373030393538303462653763386438353035336461653964623463633038636131303032333363220a09097d2c0a090922746573746e65742d6465706c6f792d6163636f756e74223a207b0a0909092261646472657373223a2022307836623939616365646633306232633433222c0a090909226b6579223a202266353039643830373434326232646264386334373133363536376531656133326630316162303132656236386666336663383763323663323637666339663833220a09097d2c0a090922746573746e65742d636f6d6d6f6e2d636f6e7472616374732d6163636f756e74223a207b0a0909092261646472657373223a2022307861376233343337306136356662353136222c0a090909226b6579223a202263356464333065666336383766613339353364366363323033373061623838333263376438323964326534326637326661356533313139346135393466386533220a09097d2c0a090922746573746e65742d636f6d6d69742d6163636f756e74223a207b0a0909092261646472657373223a2022307831373638643238626130353939383063222c0a090909226b6579223a207b0a090909092274797065223a2022686578222c0a0909090922696e646578223a20302c0a20202020202020200909227369676e6174757265416c676f726974686d223a202245434453415f736563703235366b31222c0a202020202020202009092268617368416c676f726974686d223a2022534841325f323536222c0a2020202020202020090922707269766174654b6579223a202261383436653937386233313030656232326465366438366439623766623764343534303434653862623833643630393939393531366531613438643339383563220a0909097d0a09097d2c0a090922626f626f2d6163636f756e74223a207b0a0909092261646472657373223a2022307831656532623566326230363531616361222c0a090909226b6579223a207b0a090909092274797065223a2022686578222c0a0909090922696e646578223a20302c0a20202020202020200909227369676e6174757265416c676f726974686d223a202245434453415f736563703235366b31222c0a202020202020202009092268617368416c676f726974686d223a2022534841325f323536222c0a2020202020202020090922707269766174654b6579223a20226538343739386163366638386563326661613862633561366466663738353564333139643838366133663463356661303764656531663864383563333336663522090a0909097d0a09097d0a097d2c0a0922636f6e747261637473223a207b0a0909224572726f72436f6465223a20222e2f636f6e7472616374732f4572726f72436f64652e636463222c0a0909225374725574696c697479223a20222e2f636f6e7472616374732f5374725574696c6974792e636463222c0a0909225261697365506f6f6c223a20222e2f636f6e7472616374732f5261697365506f6f6c2e636463222c0a09092246756e6769626c65546f6b656e223a207b0a09090922736f75726365223a20222e2f636f6e7472616374732f7374616e646172642f46756e6769626c65546f6b656e2e636463222c0a09090922616c6961736573223a207b0a0909090922656d756c61746f72223a2022307865653832383536626632306532616136222c0a0909090922746573746e6574223a2022307839613037363664393362363630386237220a0909097d0a09097d2c0a09092246555344223a207b0a09090922736f75726365223a20222e2f636f6e7472616374732f7374616e646172642f465553442e636463222c0a09090922616c6961736573223a207b0a0909090922656d756c61746f72223a2022307866386436653035383662306132306337222c0a0909090922746573746e6574223a2022307865323233643861363239653439633638220a0909097d0a09097d2c0a0909224f7261636c65496e74657266616365223a207b0a09090922736f75726365223a20222e2f636f6e7472616374732f6f7261636c652f4f7261636c65496e746572666163652e636463222c0a09090922616c6961736573223a207b0a0909090922746573746e6574223a2022307832613962353963336532623732656530220a0909097d0a09097d2c0a0909224f7261636c65436f6e666967223a207b0a09090922736f75726365223a20222e2f636f6e7472616374732f6f7261636c652f4f7261636c65436f6e6669672e636463222c0a09090922616c6961736573223a207b0a0909090922746573746e6574223a2022307832613962353963336532623732656530220a0909097d0a09097d2c0a090922466c6f7750726963654f7261636c65223a20222e2f636f6e7472616374732f6f7261636c652f466c6f7750726963654f7261636c652e636463222c0a0909224655534450726963654f7261636c65223a20222e2f636f6e7472616374732f6f7261636c652f4655534450726963654f7261636c652e636463222c0a09092243565344546f6b656e5632223a20222e2f636f6e7472616374732f435653442f43565344546f6b656e56322e636463222c0a0909225261697365506f6f6c496e74657266616365223a20222e2f636f6e7472616374732f5261697365506f6f6c496e746572666163652e636463222c0a090922557365724365727469666963617465223a20222e2f636f6e7472616374732f5573657243657274696669636174652e636463220a097d2c0a09226465706c6f796d656e7473223a207b0a090922656d756c61746f72223a207b0a090909226465706c6f792d6163636f756e74223a205b0a09090909224572726f72436f6465222c0a09090909225374725574696c697479222c0a09090909224f7261636c65436f6e666967222c0a09090909224f7261636c65496e74657266616365222c0a09090909225261697365506f6f6c222c0a09090909225261697365506f6f6c496e74657266616365222c0a0909090922557365724365727469666963617465220a0909095d2c0a09090922666c6f77546f6b656e2d70726963652d6f7261636c65223a205b0a0909090922466c6f7750726963654f7261636c65220a0909095d2c0a09090922667573642d70726963652d6f7261636c65223a205b0a09090909224655534450726963654f7261636c65220a0909095d0a09097d2c0a090922746573746e6574223a207b0a09090922746573746e65742d637673642d6465706c6f792d6163636f756e74223a205b2243565344546f6b656e5632225d2c0a09090922746573746e65742d636f6d6d6f6e2d636f6e7472616374732d6163636f756e74223a205b0a09090909224572726f72436f6465222c0a09090909225374725574696c697479222c0a09090909225261697365506f6f6c496e74657266616365222c0a0909090922557365724365727469666963617465220a0909095d2c0a09090922746573746e65742d6465706c6f792d6163636f756e74223a205b225261697365506f6f6c225d0a09097d0a097d0a7d0a20"

    }
}